import React from 'react'
import {FiShoppingCart} from 'react-icons/fi'
import {Link} from 'react-router-dom'
import { useSelector, useDispatch } from 'react-redux';
import { isLoggedOut, userIndexReset} from '../Actions';

export default function Header() {
    const dispatch = useDispatch();
    const users = useSelector(state=>state.users)
    const userIsLoggedIndex = useSelector(state=>state.userIndex)
    const userIsLogged = useSelector(state=>state.isLogged)
    const animationState = useSelector(state=>state.animation)

    const LogOut=()=>{
        dispatch(isLoggedOut())
        dispatch(userIndexReset())
    }

    const checkState=()=>{
        if (animationState) {
            return "shake-vertical"
        }
        else{
            return ""
        }
    }
    return (
        <div className="Header">
            <div className="Header-home">
                <h1><Link to="/" className="Nav-home">
                    <svg xmlns="http://www.w3.org/2000/svg" id="Capa_1" enableBackground="new 0 0 511.959 511.959" viewBox="0 0 511.959 511.959" width="46" height="46"><g><g><g><ellipse fill="#94E1FA" cx="231.376" cy="242.476" rx="223.876" ry="222.344" /></g></g><g><g><path fill="#9ec8fc" d="m 231.376 20.131 c -5.042 0 -10.041 0.182 -15 0.508 c 116.647 7.666 208.876 104.046 208.876 221.836 s -92.229 214.17 -208.876 221.836 c 4.959 0.326 9.958 0.508 15 0.508 c 123.643 0 223.876 -99.547 223.876 -222.344 s -100.233 -222.344 -223.876 -222.344 Z" /></g></g><g><g><ellipse fill="#e27f86" cx="334.47" cy="350.52" rx="30.316" ry="30.109" /></g></g><g><g><ellipse fill="#77d1b3" cx="45.848" cy="122.525" rx="30.316" ry="30.109" /></g></g><g><g><ellipse fill="#f8e883" cx="262.724" cy="104.638" rx="30.316" ry="30.109" /></g></g><g><g><path fill="#df646e" d="m 355.908 329.083 c -9.838 -9.838 -24.833 -11.393 -36.404 -4.706 c 9.128 5.189 15.284 14.949 15.284 26.143 c 0 11.268 -6.236 21.084 -15.464 26.246 c 11.525 6.608 26.532 4.95 36.438 -4.956 c 11.838 -11.839 11.904 -30.969 0.146 -42.727 Z" /></g></g><g><g><path fill="#67b59f" d="m 45.848 92.416 c -5.459 0 -10.576 1.44 -15 3.948 c 9.146 5.184 15.316 14.954 15.316 26.161 s -6.17 20.977 -15.316 26.161 c 4.424 2.508 9.541 3.948 15 3.948 c 16.743 0 30.316 -13.48 30.316 -30.109 s -13.573 -30.109 -30.316 -30.109 Z" /></g></g><g><g><path fill="#f7e365" d="m 262.724 74.529 c -5.459 0 -10.576 1.44 -15 3.948 c 9.146 5.184 15.316 14.954 15.316 26.161 c 0 11.208 -6.17 20.977 -15.316 26.161 c 4.424 2.507 9.541 3.948 15 3.948 c 16.743 0 30.316 -13.48 30.316 -30.109 s -13.573 -30.109 -30.316 -30.109 Z" /></g></g><path d="m 462.227 258 c 0.348 -5.137 0.525 -10.313 0.525 -15.524 c 0 -45.045 -12.971 -88.103 -37.131 -124.991 c 0.688 -0.791 1.236 -1.723 1.55 -2.794 c 15.137 -51.619 12.159 -86.551 -8.612 -101.021 c -14.179 -9.879 -34.402 -8.821 -60.103 3.144 c -9.226 4.295 -19.159 10.056 -29.587 17.098 c -30.151 -13.929 -63.252 -21.281 -97.493 -21.281 c -13.133 0 -26.305 1.102 -39.148 3.277 c -4.084 0.692 -6.834 4.563 -6.143 8.647 c 0.692 4.084 4.562 6.834 8.646 6.142 c 12.019 -2.035 24.348 -3.067 36.644 -3.067 c 29.066 0 57.255 5.657 83.298 16.437 c -10.757 8.114 -21.921 17.443 -33.309 27.867 c -5.506 -3.117 -11.866 -4.907 -18.642 -4.907 c -20.852 0 -37.816 16.871 -37.816 37.609 c 0 7.146 2.016 13.833 5.509 19.529 c -20.98 23.773 -41.482 49.786 -60.974 77.383 c -5.539 7.842 -10.904 15.689 -16.097 23.52 c -30.992 -25.722 -58.195 -52.004 -79.664 -77.117 c 6.193 -6.7 9.982 -15.63 9.982 -25.427 c 0 -10.214 -4.121 -19.484 -10.788 -26.268 c 25.607 -27.352 57.917 -47.674 93.613 -58.801 c 3.955 -1.233 6.161 -5.438 4.928 -9.392 c -1.233 -3.955 -5.438 -6.162 -9.392 -4.928 c -9.167 2.858 -18.123 6.288 -26.825 10.246 c -27.693 -9.37 -51.529 -14.253 -70.864 -14.489 c -22.497 -0.284 -38.253 5.765 -46.861 17.953 c -9.781 13.849 -8.95 33.462 2.463 58.322 c -7.322 6.863 -11.907 16.585 -11.907 27.357 c 0 10.636 4.47 20.248 11.631 27.095 c -13.044 29.312 -19.66 60.552 -19.66 92.857 c 0 60.599 23.461 117.606 66.093 160.819 c -7.085 26.073 -9.507 48.479 -6.529 65.451 c 2.361 13.456 8.029 23.393 16.846 29.535 c 6.429 4.479 14.113 6.704 22.954 6.704 c 20.987 0 48.484 -12.539 81.133 -37.219 c 0.325 -0.246 0.617 -0.518 0.89 -0.803 c 16.235 3.534 32.971 5.357 49.99 5.357 c 4.009 0 8.063 -0.103 12.047 -0.307 c 4.137 -0.211 7.319 -3.736 7.108 -7.873 c -0.212 -4.137 -3.749 -7.322 -7.873 -7.108 c -3.731 0.19 -7.527 0.287 -11.282 0.287 c -55.673 0 -108.129 -20.743 -148.435 -58.535 c 13.148 -43.247 39.08 -96.859 73.896 -151.538 c 15.846 12.653 32.523 25.105 49.812 37.148 c 30.361 21.151 61.061 40.036 91.352 56.199 c -0.872 3.164 -1.346 6.49 -1.346 9.925 c 0 20.738 16.964 37.609 37.816 37.609 c 12.779 0 24.09 -6.343 30.939 -16.023 c 10.419 4.125 20.37 7.693 29.822 10.695 c -31.015 35.751 -73.852 61.436 -123.263 70.746 c -4.07 0.767 -6.749 4.688 -5.982 8.759 c 0.678 3.602 3.826 6.113 7.362 6.113 c 0.46 0 0.928 -0.043 1.397 -0.131 c 55.209 -10.402 102.736 -39.931 136.197 -80.881 c 18.595 4.947 34.948 7.436 48.792 7.436 c 21.546 0 37.041 -6.004 45.549 -18.05 c 16.849 -23.856 1.544 -66.008 -43.058 -118.791 Z m -97.441 -227.588 c 14.101 -6.565 33.389 -12.662 45.199 -4.435 c 13.652 9.51 15.388 37.217 4.995 76.59 c -6.127 -7.901 -12.797 -15.467 -20.015 -22.635 c -15.286 -15.181 -32.338 -27.967 -50.689 -38.188 c 7.178 -4.517 14.044 -8.321 20.51 -11.332 Z m -102.062 51.617 c 12.581 0 22.816 10.142 22.816 22.609 s -10.235 22.609 -22.816 22.609 s -22.816 -10.142 -22.816 -22.609 s 10.235 -22.609 22.816 -22.609 Z m -239.693 40.496 c 0 -12.467 10.235 -22.609 22.816 -22.609 s 22.816 10.142 22.816 22.609 s -10.235 22.609 -22.816 22.609 c -12.58 0 -22.816 -10.142 -22.816 -22.609 Z m 6.696 -77.026 c 10.37 -14.682 42.154 -15.385 86.47 -2.397 c -20.742 11.85 -39.641 26.894 -55.918 44.644 c -0.005 0.005 -0.009 0.011 -0.014 0.016 c -4.446 -1.83 -9.314 -2.847 -14.417 -2.847 c -4.579 0 -8.97 0.815 -13.036 2.304 c -6.068 -13.747 -10.722 -30.906 -3.085 -41.72 Z m 133.096 416.606 c -35.492 25.09 -63.581 33.801 -77.839 23.869 c -5.418 -3.775 -9 -10.443 -10.645 -19.82 c -2.335 -13.306 -0.776 -30.762 4.161 -51.158 c 24.736 21.689 53.398 37.624 84.323 47.109 Z m -91.773 -75.345 c -36.223 -39.592 -56.05 -90.426 -56.05 -144.284 c 0 -29.46 5.901 -57.963 17.509 -84.764 c 4.151 1.561 8.645 2.423 13.339 2.423 c 5.572 0 10.861 -1.214 15.628 -3.376 c 22.439 26.386 51.038 54.009 83.63 80.954 c -34.159 53.347 -59.806 105.368 -74.056 149.047 Z m 263.421 -13.631 c -12.581 0 -22.816 -10.142 -22.816 -22.609 c 0 -3.255 0.703 -6.348 1.958 -9.147 c 0.175 -0.253 0.342 -0.514 0.488 -0.793 c 0.18 -0.344 0.321 -0.698 0.443 -1.055 c 3.905 -6.922 11.372 -11.614 19.927 -11.614 c 12.581 0 22.816 10.142 22.816 22.609 s -10.235 22.609 -22.816 22.609 Z m 36.981 -14.759 c 0.543 -2.533 0.835 -5.158 0.835 -7.85 c 0 -20.738 -16.964 -37.609 -37.816 -37.609 c -12.012 0 -22.726 5.605 -29.658 14.316 c -29.689 -15.856 -59.797 -34.384 -89.59 -55.139 c -17.452 -12.158 -34.257 -24.727 -50.187 -37.489 c 5.369 -8.134 10.925 -16.277 16.659 -24.396 c 18.885 -26.738 38.729 -51.934 59.021 -75.01 c 6.205 4.433 13.802 7.054 22.008 7.054 c 20.852 0 37.816 -16.871 37.816 -37.609 c 0 -8.566 -2.9 -16.468 -7.768 -22.799 c 12.94 -11.768 25.517 -22.048 37.424 -30.597 c 19.759 10.093 38.036 23.281 54.199 39.334 c 40.857 40.577 63.357 94.522 63.357 151.9 c 0 47.383 -15.62 91.73 -42.379 127.695 c -10.645 -3.163 -21.992 -7.1 -33.921 -11.801 Z m 121.58 9.769 c -9.295 13.161 -35.477 15.032 -72.166 6.211 c 19.793 -28.071 33.373 -60.622 38.986 -95.553 c 31.975 40.644 44.357 73.516 33.18 89.342 Z" /></g></svg>
                    Neto-Shop</Link></h1>
            </div>
            <div className="Header-nav">
                <span className="Sign-In"> Hi,
                    {userIsLogged? <span className="Nav-link User-Link">{users[userIsLoggedIndex][0].userName}  
                        <span className="User-nav">
                            <Link to={"/user="+users[userIsLoggedIndex][0].userName} className="Nav-link">Settings</Link>
                            /<span className="Nav-link Cursor" onClick={()=>LogOut()}>Log Out</span>
                        </span>
                    </span> : <span>
                    <Link to="/login" className="Nav-link">Log In</Link>
                    or
                    <Link to="/signup" className="Nav-link">Register</Link></span>}
                </span>
                {userIsLogged? <Link to={"/cart="+users[userIsLoggedIndex][0].userName} className="Nav-cart">
                    <FiShoppingCart className={checkState()}/>
                </Link> : <Link to="/cart" className="Nav-cart">
                    <FiShoppingCart/>
                </Link>
                }
            </div>
        </div>
    )
}
